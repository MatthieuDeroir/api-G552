const assert = require('assert');
const Frame_0x77_PlayerNames = require('../../RSCOM/Frame/Frame_0x77_GuestPlayerNames');
require('jest')

describe('Frame_0x77_PlayerNames', () => {

    const expectedResult = {
        insertType: 'eGameStateInsertType.DirectConsoleData',
        Guest_PlayerName: new Array(16),
        Guest_PlayerNumber: new Array(16),
    };

    test('Number 12 [0xF8, 0x77, 0x30, 0x4D, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x57, 0x00, 0x4F, 0x00, 0x58, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x30, 0x00];', () => {
        const message = [
            0xF8, //Start byte
            0x62, // Sport definition
            0x30, // Player Index
            0x4D, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00,
            0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00,
            0x41, 0x00, 0x57, 0x00, 0x4F, 0x00, 0x58, 0x00, // Player name, each character is 2 bytes
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // Reserved
            0x31, 0x32, // Player number
            0x0D // End byte
        ];
        expectedResult.Guest_PlayerName[0] = 'MAAAAAAAAWOX';
        expectedResult.Guest_PlayerNumber[0] = 12;

        const result = Frame_0x77_PlayerNames.build(message);

        assert.deepStrictEqual(result, expectedResult);
    });

    test('Number 00 [0x53, 0x77, 0x30, 0x4D, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x57, 0x00, 0x4F, 0x00, 0x58, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x30, 0x00];', () => {
        const message = [0xF8, 0x77, 0x30, 0x4D, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x57, 0x00, 0x4F, 0x00, 0x58, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x30, 0x00];

        expectedResult.Guest_PlayerName[0] = 'MAAAAAAAAWOX';
        expectedResult.Guest_PlayerNumber[0] = -3;

        const result = Frame_0x77_PlayerNames.build(message);

        assert.deepStrictEqual(result, expectedResult);
    });

    test('Number 99 [0x53, 0x77, 0x30, 0x4D, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x57, 0x00, 0x4F, 0x00, 0x58, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x30, 0x00];', () => {
        const message = [0xF8, 0x77, 0x30, 0x4D, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x41, 0x00, 0x57, 0x00, 0x4F, 0x00, 0x58, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x39, 0x39, 0x00];

        expectedResult.Guest_PlayerName[0] = 'MAAAAAAAAWOX';
        expectedResult.Guest_PlayerNumber[0] = 99;

        const result = Frame_0x77_PlayerNames.build(message);

        assert.deepStrictEqual(result, expectedResult);
    });
});
